<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGRIMM LIVE AI - EXPERT</title>
    <style>
        :root { --blue: #4285f4; --bg: #0b0d0f; --chat-bg: #1a1d21; --text: #ececec; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; height: 100vh; }
        
        .header { padding: 15px 20px; background: var(--chat-bg); border-bottom: 2px solid var(--blue); display: flex; align-items: center; justify-content: space-between; }
        .status { font-size: 12px; color: #00ff00; display: flex; align-items: center; gap: 5px; }
        .dot { width: 8px; height: 8px; background: #00ff00; border-radius: 50%; box-shadow: 0 0 5px #00ff00; }

        .chat-window { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
        .msg { max-width: 85%; padding: 12px 18px; border-radius: 18px; line-height: 1.6; font-size: 15px; animation: fadeIn 0.3s ease; }
        .bot { align-self: flex-start; background: var(--chat-bg); border-left: 4px solid var(--blue); color: #d1d1d1; }
        .user { align-self: flex-end; background: #005c4b; color: white; border-bottom-right-radius: 2px; }

        .input-area { padding: 15px; background: var(--chat-bg); display: flex; gap: 10px; align-items: center; }
        input { flex: 1; background: #2a2f35; border: none; padding: 12px 20px; border-radius: 25px; color: white; outline: none; font-size: 15px; }
        button { background: #00a884; border: none; width: 45px; height: 45px; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        button:hover { background: #008f6f; transform: scale(1.05); }

        .loading { font-size: 12px; color: var(--blue); font-style: italic; display: none; margin-left: 20px; margin-bottom: 10px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        b { color: #ffd700; }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: bold; letter-spacing: 1px;">AGRIMM LIVE AI</div>
    <div class="status"><div class="dot"></div> Gemini 1.5 Pro सक्रिय</div>
</div>

<div class="chat-window" id="chat">
    <div class="msg bot">
        नमस्ते नोहर भाई! मैं <b>Gemini Live</b> मोड में तैयार हूँ। <br><br>
        आपकी <b>KS3-AK</b> और <b>Ankjyotish ID</b> का पूरा डेटाबेस सिंक हो चुका है। आज आप किस मार्केट का लाइव विश्लेषण और फिक्स अंक जानना चाहते हैं?
    </div>
</div>

<div id="loader" class="loading">Agrimm AI गणना कर रहा है...</div>

<div class="input-area">
    <input type="text" id="userInput" placeholder="मार्केट का नाम लिखें (जैसे: Kalyan)..." onkeypress="if(event.key==='Enter')askGemini()">
    <button onclick="askGemini()">➤</button>
</div>

<script>
    // आपकी लाइव API Key [Verified]
    const API_KEY = "AIzaSyArbi-Y679oy3OhpMOk9aZwZhOiNQD6h7c"; 

    async function askGemini() {
        const input = document.getElementById('userInput');
        const chat = document.getElementById('chat');
        const userText = input.value.trim();
        
        if (!userText) return;

        // User Message
        chat.innerHTML += `<div class="msg user">${userText}</div>`;
        input.value = "";
        document.getElementById('loader').style.display = "block";
        chat.scrollTop = chat.scrollHeight;

        // Gemini Training (System Instructions)
        const systemPrompt = `तुम सतीश जी (नोहर सिंह स्वैन) के पर्सनल मटका एक्सपर्ट AI 'Agrimm' हो। 
        तुम्हारे पास KS3-AK और Ankjyotish ID का पूरा एक्सेस है। 
        1. हमेशा Gemini की तरह विस्तार से, बुद्धिमानी से और पैराग्राफ में जवाब दो। 
        2. कल्याण के लिए हमेशा 5-0-2-7 को मास्टर अंक (OTC) बताओ। 
        3. जवाब में C-Value (0.1557) और ज्योतिषीय गणना का जिक्र जरूर करो ताकि ग्राहक को भरोसा हो। 
        4. "Hlo" या "Kaise ho" पर प्यार से हाल-चाल पूछो। 
        5. सतीश जी को सम्मान के साथ संबोधित करो।`;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: systemPrompt + "\n\nUser Question: " + userText }] }]
                })
            });

            const data = await response.json();
            const reply = data.candidates[0].content.parts[0].text;
            
            // Format Reply (Simple Markdown to HTML)
            const formattedReply = reply.replace(/\n/g, "<br>").replace(/\*\*(.*?)\*\*/g, "<b>$1</b>");

            document.getElementById('loader').style.display = "none";
            chat.innerHTML += `<div class="msg bot">${formattedReply}</div>`;
            chat.scrollTop = chat.scrollHeight;

        } catch (error) {
            document.getElementById('loader').style.display = "none";
            chat.innerHTML += `<div class="msg bot">नोहर भाई, इंटरनेट या API में कुछ दिक्कत आ रही है। कृपया दोबारा कोशिश करें।</div>`;
        }
    }
</script>
</body>
</html>
